<script src="{{ 'li_custom.js' | asset_url }}" type="text/javascript"></script>
<div li-element="product-variant-container" class="product-item_component" x-data="handleVariant({{ product | json | escape }}, {{ product.options_by_name | json | escape }}, {{ product.selected_or_first_available_variant | json | escape }})" x-init="$nextTick(() => { activateVariants() })" @setbundleitem.window="updateBundleItem($event.detail.product, $event.detail.quantity)">
                          <div class="product-item_image-link">
                            <a li-object:href="product.url" href="{{ product.url }}" class="product-item_image-wrapper w-inline-block"><img li-object:src="product.featured_image | img_url: 'master'" li-object:alt="product.featured_image.alt" alt="{{ product.featured_image.alt }}" src="{{ product.featured_image | img_url: 'master' }}" loading="lazy" class="product-item_image"></a>
                            <div class="product-item_tag_list">
                              {% if product.selected_or_first_available_variant.available != true %}    <div li-if="product.selected_or_first_available_variant.available != true" class="product-item_tag is-red">
    Épuisé    </div>
{% endif %}
                              {% if product.type == 'Cafe' %}    <div li-if="product.type == 'Cafe'">
    
                                {% if product.metafields.custom.pays_d_origine != blank %}    <div li-if="product.metafields.custom.pays_d_origine != blank" class="product-item_tag">
    
                                  {% assign pays_origine = product.metafields.custom.pays_d_origine.value %}<img li-object:src="pays_origine.drapeau | img_url: 'large'" loading="lazy" alt="" src="{{ pays_origine.drapeau | img_url: 'large' }}" class="flag_icon">
                                  <div li-object="pays_origine.pays" class="product-item_tag-text">{{ pays_origine.pays }}</div>
                                    </div>
{% endif %}
                                  </div>
{% endif %}
                              {% if product.type == 'The' %}    <div li-if="product.type == 'The'">
    
                                {% if product.metafields.custom.format_the != blank %}    <div li-if="product.metafields.custom.format_the != blank" class="product-item_tag">
    
                                  {% assign format = product.metafields.custom.format_the.value %}
                                  <div li-object="format" class="product-item_tag-text">{{ format }}</div>
                                    </div>
{% endif %}
                                  </div>
{% endif %}
                              {% if product.metafields.custom.certification %}    <div li-if="product.metafields.custom.certification" class="product-item_tag">
    
                                {% assign certification = product.metafields.custom.certification.value %}<img li-object:src="certification.logo| img_url: 'large'" loading="lazy" alt="" src="{{ certification.logo| img_url: 'large' }}" class="flag_icon">
                                <div li-object="certification.nom" class="product-item_tag-text">{{ certification.nom }}</div>
                                  </div>
{% endif %}
                            </div>
                          </div>
                          <div class="spacer-xxsmall"></div>
                          <a li-object:href="product.url" href="{{ product.url }}" class="product-item_text-link w-inline-block">
                            <div class="product-item_left">
                              <div li-object="product.title" class="product_name">{{ product.title }}</div>
                              <div>
                                {% assign aromeNames = product.metafields.custom.famille_aromatique.value | map: 'nom' | slice: 0, 2 %}
                                <div li-object="aromeNames | join: ', '">{{ aromeNames | join: ', ' }}</div>
                              </div>
                            </div>
                            <div class="product-item_price">
                              {% if product.compare_at_price_max > product.price %}    <div li-if="product.compare_at_price_max > product.price" class="padding-bottom padding-xxxsmall">
    
                                <div li-object="product.compare_at_price | money" class="text-size-small">{{ product.compare_at_price | money }}</div>
                                  </div>
{% endif %}
                              <div li-object="product.price | money" class="text-size-regular text-weight-bold">{{ product.price | money }}</div>
                            </div>
                          </a>
                        </div>
